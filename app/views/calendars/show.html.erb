<h2>Forest Heights/Strathcona Missionary Meal Calendar</h2>

<ul class="nav nav-tabs">
  <% @companionships.each do |comp| %>
    <li class="nav-item">
      <a class="nav-link <%= 'active' if comp.id.to_s == params[:id] %>" href="<%= calendar_path_url(comp.id) %>"><%= comp.label %></a>
  <% end %>
  </li>
</ul>

  <div class="table table-bordered table-sm">
    <table id = 'calendar' class = 'calendar-table table-responsive-lg'>
      <tr class = 'table-active'>
        <% @dates.take(7).each do |day| %>
          <td class='calendar-header'><%= day[:date].strftime("%A") %></td>
        <% end %>
      </tr>

      <% @weeks.times do |week| %>
        <div class="card">
          <tr class="calendar-row">
            <% @dates.select { |h| h[:week_no] == week }.each do |day| %>
            <td class = 'calendar-cell'>
              <div class = 'card-header p-1 text-right'><%= day[:date].strftime("%b %-d") %> </div>
              <div class="card-body">
                <% if day[:family] %>
                <div class = 'card-text appt-data family'><%= day[:family] %> </div>
                <div class = 'card-text appt-data contact'><%= day[:contact_info] %> </div>
                <div class = 'card-text appt-data other'><%= day[:other_info] %> </div>
                <div class = 'card-text text-right'><%= link_to 'Edit', new_companionship_appointment_path(@companionship) %> </div>
                <% else %>
                <div class = 'appt-none'><%= link_to 'Sign Up', new_companionship_appointment_path(@companionship) %></div>
                <% end %>
                <!-- <div> Week Number:<%= day[:week_no] %></div>
                  <div> Day Number:<%= day[:day_no] %></div> -->
              </div>
              </td>
              <% end %>
            </tr>
        </div>
      <% end %>
    </table>
  </div>
